<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tema 21 - Dise√±o de Bases de Datos</title>
    <style>
        :root {
            --bg-color: #1a1a1a; --text-color: #e0e0e0; --header-bg: linear-gradient(135deg, #1c5a8a, #1a2530);
            --header-text: #f0f0f0; --tab-container-bg: #2c3e50; --tab-text: #ecf0f1; --tab-hover: rgba(52, 152, 219, 0.2);
            --tab-active: #2980b9; --content-bg: #2c2c2c; --card-bg: #2d2d2d; --card-text: #e0e0e0; --stat-card-bg: #333;
            --stat-number: #3498db; --checkmark-color: #4caf50; --highlight-box-bg: #1e3a5f; --success-box-bg: #2a4a2a;
            --table-header-bg: #1f618d; --table-header-text: white; --table-row-even: #3a3a3a; --exercise-bg: #2d2d2d;
            --exercise-border: #2980b9; --exercise-text: #e0e0e0; --feedback-correct: #2a4a2a; --feedback-incorrect: #5a2a2a;
        }
        .light-mode {
            --bg-color: #f5f7fa; --text-color: #2c3e50; --content-bg: #f8f9fa; --card-bg: #f8f9fa; --card-text: #2c3e50;
            --stat-card-bg: white; --highlight-box-bg: #e8f4fc; --success-box-bg: #d4edda; --table-row-even: #f2f2f2;
            --exercise-bg: #f8f9fa; --exercise-text: #2c3e50; --feedback-correct: #d4edda; --feedback-incorrect: #f8d7da;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: var(--bg-color); color: var(--text-color); line-height: 1.6; transition: all 0.3s; }
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        .header { text-align: center; padding: 40px 0; background: var(--header-bg); color: var(--header-text); margin-bottom: 30px; border-radius: 12px; position: relative; }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; } .header p { font-size: 1.2em; opacity: 0.9; }
        .theme-toggle { position: absolute; top: 20px; right: 20px; background: rgba(255, 255, 255, 0.1); border: none; border-radius: 50%; width: 40px; height: 40px; cursor: pointer; color: white; font-size: 1.2em; }
        .theme-toggle:hover { background: rgba(255, 255, 255, 0.3); }
        .tab-container { background: var(--tab-container-bg); border-radius: 10px; margin-bottom: 20px; overflow: hidden; }
        .tabs { display: flex; background: var(--tab-container-bg); overflow-x: auto; }
        .tab { padding: 15px 25px; cursor: pointer; white-space: nowrap; color: var(--tab-text); transition: all 0.3s ease; }
        .tab:hover { background: var(--tab-hover); } .tab.active { background: var(--tab-active); }
        .content-area { background: var(--content-bg); border: 4px solid var(--tab-active); border-top: none; border-radius: 0 0 10px 10px; min-height: 500px; }
        .tab-content { display: none; padding: 30px; } .tab-content.active { display: block; }
        .card { background: var(--card-bg); border-left: 4px solid var(--tab-active); padding: 20px; margin-bottom: 20px; border-radius: 8px; color: var(--card-text); }
        .card h3 { margin-bottom: 15px; font-size: 1.3em; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 30px 0; }
        .stat-card { background: var(--stat-card-bg); padding: 25px; border-radius: 10px; text-align: center; }
        .stat-number { font-size: 2em; font-weight: bold; color: var(--stat-number); display: block; margin-bottom: 5px; }
        .list-checkmark { list-style: none; }
        .list-checkmark li { position: relative; padding-left: 30px; margin-bottom: 10px; }
        .list-checkmark li::before { content: '‚úì'; position: absolute; left: 0; top: 0; color: var(--checkmark-color); font-weight: bold; }
        .highlight-box { background: var(--highlight-box-bg); padding: 20px; border-radius: 8px; margin: 20px 0; }
        .success-box { background: var(--success-box-bg); padding: 20px; border-radius: 8px; margin: 20px 0; }
        .comparison-table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        .comparison-table th { background: var(--table-header-bg); color: var(--table-header-text); padding: 12px; }
        .comparison-table td { padding: 12px; border-bottom: 1px solid #555; }
        .comparison-table tr:nth-child(even) { background: var(--table-row-even); }
        .exam-tip { background: var(--highlight-box-bg); border-left: 4px solid #f39c12; padding: 15px; margin: 15px 0; border-radius: 0 8px 8px 0; }
        .exam-tip h4 { color: #f39c12; margin-bottom: 8px; }
        .exercise-container { background: var(--exercise-bg); border-left: 4px solid var(--exercise-border); padding: 20px; margin-bottom: 20px; border-radius: 8px; color: var(--exercise-text); }
        .exercise-question { margin-bottom: 15px; font-weight: bold; }
        .exercise-options { margin-left: 20px; margin-bottom: 15px; }
        .exercise-btn { background: var(--tab-active); color: white; border: none; padding: 10px 15px; border-radius: 4px; cursor: pointer; margin: 10px 5px 0 0; }
        .exercise-feedback { margin-top: 10px; padding: 10px; border-radius: 4px; display: none; }
        .exercise-feedback.correct { background: var(--feedback-correct); display: block; }
        .exercise-feedback.incorrect { background: var(--feedback-incorrect); display: block; }
    </style>
</head>
<body class="dark-mode">
    <div class="container">
        <button class="theme-toggle" onclick="toggleTheme()">‚òÄÔ∏è</button>
        
        <div class="header">
            <h1>Tema 21: Dise√±o de Bases de Datos</h1>
            <p>La arquitectura ANSI/SPARC. El modelo l√≥gico relacional. Normalizaci√≥n. Dise√±o l√≥gico. Dise√±o f√≠sico. Problemas de concurrencia de acceso. Mecanismos de resoluci√≥n de conflictos.</p>
        </div>

        <div class="tab-container">
            <div class="tabs">
                <div class="tab active" onclick="showTab('overview')">üìã Visi√≥n General</div>
                <div class="tab" onclick="showTab('content1')">üèóÔ∏è ANSI/SPARC</div>
                <div class="tab" onclick="showTab('content2')">üìä Normalizaci√≥n</div>
                <div class="tab" onclick="showTab('content3')">üîß Dise√±o L&F</div>
                <div class="tab" onclick="showTab('content4')">‚ö° Concurrencia</div>
                <div class="tab" onclick="showTab('exercises')">‚úèÔ∏è Ejercicios</div>
                <div class="tab" onclick="showTab('resources')">üìö Recursos</div>
            </div>
        </div>

        <div class="content-area">
            <div id="overview" class="tab-content active">
                <div class="stats-grid">
                    <div class="stat-card"><span class="stat-number">3</span><div>Niveles ANSI/SPARC</div></div>
                    <div class="stat-card"><span class="stat-number">6</span><div>Formas Normales (1FN-6FN)</div></div>
                    <div class="stat-card"><span class="stat-number">ACID</span><div>Propiedades Transaccionales</div></div>
                    <div class="stat-card"><span class="stat-number">2PL</span><div>Two-Phase Locking</div></div>
                </div>
                <div class="card">
                    <h3>üéØ Introducci√≥n al Dise√±o de Bases de Datos</h3>
                    <p>El dise√±o de bases de datos relacionales es un proceso sistem√°tico que abarca desde la conceptualizaci√≥n hasta la implementaci√≥n f√≠sica, siguiendo principios te√≥ricos s√≥lidos para garantizar integridad, eficiencia y mantenibilidad.</p>
                    <div class="highlight-box">
                        <h4>üîç Fases del Dise√±o de BD</h4>
                        <ul class="list-checkmark">
                            <li><strong>Dise√±o Conceptual:</strong> Modelo Entidad-Relaci√≥n (ER)</li>
                            <li><strong>Dise√±o L√≥gico:</strong> Transformaci√≥n a modelo relacional y normalizaci√≥n</li>
                            <li><strong>Dise√±o F√≠sico:</strong> Optimizaci√≥n de almacenamiento e √≠ndices</li>
                        </ul>
                    </div>
                </div>
                <div class="card">
                    <h3>‚ö° Conceptos Fundamentales</h3>
                    <ul class="list-checkmark">
                        <li><strong>Arquitectura ANSI/SPARC:</strong> Separaci√≥n en 3 niveles de abstracci√≥n</li>
                        <li><strong>Modelo Relacional:</strong> Tablas, claves, integridad referencial</li>
                        <li><strong>Normalizaci√≥n:</strong> 1FN, 2FN, 3FN, BCNF, 4FN, 5FN</li>
                        <li><strong>Dependencias Funcionales:</strong> Base te√≥rica de la normalizaci√≥n</li>
                        <li><strong>Dise√±o F√≠sico:</strong> √çndices, clustering, particionado</li>
                        <li><strong>Transacciones:</strong> Propiedades ACID y control de concurrencia</li>
                        <li><strong>Bloqueos:</strong> Protocolo 2PL, deadlocks, granularidad</li>
                    </ul>
                    <div class="exam-tip">
                        <h4>üí° Estrategias para el Examen</h4>
                        <p><strong>Memoriza:</strong> Definiciones exactas de formas normales, niveles ANSI/SPARC, propiedades ACID</p>
                        <p><strong>Practica:</strong> Ejercicios de normalizaci√≥n paso a paso, identificaci√≥n de dependencias funcionales</p>
                        <p><strong>Comprende:</strong> La diferencia entre dise√±o l√≥gico y f√≠sico, mecanismos de control de concurrencia</p>
                    </div>
                </div>
                <div class="card">
                    <h3>üìà Importancia en la Pr√°ctica</h3>
                    <div class="success-box">
                        <h4>‚úÖ Beneficios del Buen Dise√±o</h4>
                        <ul class="list-checkmark">
                            <li><strong>Integridad:</strong> Eliminaci√≥n de redundancia y anomal√≠as</li>
                            <li><strong>Performance:</strong> Optimizaci√≥n de consultas y almacenamiento</li>
                            <li><strong>Escalabilidad:</strong> Capacidad de crecimiento sin reestructuraci√≥n</li>
                            <li><strong>Mantenibilidad:</strong> Facilidad de modificaci√≥n y extensi√≥n</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div id="content1" class="tab-content">
                <div class="card">
                    <h3>üèóÔ∏è Arquitectura ANSI/SPARC</h3>
                    <p>La arquitectura ANSI/SPARC (1975) es un modelo de referencia de 3 niveles que proporciona <strong>independencia de datos</strong> separando la representaci√≥n l√≥gica de la f√≠sica y permitiendo m√∫ltiples vistas de usuario.</p>
                    
                    <div class="highlight-box">
                        <h4>üéØ Objetivos Principales</h4>
                        <ul class="list-checkmark">
                            <li><strong>Independencia L√≥gica:</strong> Cambios en esquema conceptual no afectan vistas</li>
                            <li><strong>Independencia F√≠sica:</strong> Cambios en almacenamiento no afectan aplicaciones</li>
                            <li><strong>Flexibilidad:</strong> M√∫ltiples vistas personalizadas para diferentes usuarios</li>
                            <li><strong>Seguridad:</strong> Control de acceso granular por vistas</li>
                        </ul>
                    </div>
                </div>
                
                <div class="card">
                    <h3>üìä Los Tres Niveles en Detalle</h3>
                    
                    <div class="success-box">
                        <h4>üëÅÔ∏è NIVEL EXTERNO (Vistas de Usuario)</h4>
                        <ul class="list-checkmark">
                            <li><strong>Prop√≥sito:</strong> Adaptar datos a necesidades espec√≠ficas del usuario</li>
                            <li><strong>Caracter√≠sticas:</strong> M√∫ltiples esquemas externos posibles</li>
                            <li><strong>Ventajas:</strong> Simplicidad, seguridad, personalizaci√≥n</li>
                            <li><strong>Ejemplo:</strong> Vista de empleados sin salarios para RRHH b√°sico</li>
                        </ul>
                        <div class="exam-tip">
                            <p><strong>SQL:</strong> CREATE VIEW empleados_info AS SELECT nombre, departamento, puesto FROM empleados;</p>
                        </div>
                    </div>
                    
                    <div class="highlight-box">
                        <h4>üß† NIVEL CONCEPTUAL (Esquema L√≥gico Global)</h4>
                        <ul class="list-checkmark">
                            <li><strong>Prop√≥sito:</strong> Descripci√≥n completa y unificada de la BD</li>
                            <li><strong>Incluye:</strong> Entidades, relaciones, restricciones de integridad</li>
                            <li><strong>Independiente de:</strong> Detalles f√≠sicos y vistas espec√≠ficas</li>
                            <li><strong>Normalmente:</strong> Un solo esquema conceptual por BD</li>
                        </ul>
                        <div class="exam-tip">
                            <p><strong>Ejemplo:</strong> Todas las tablas, claves primarias/for√°neas, restricciones CHECK</p>
                        </div>
                    </div>
                    
                    <div class="success-box">
                        <h4>üíæ NIVEL INTERNO (Organizaci√≥n F√≠sica)</h4>
                        <ul class="list-checkmark">
                            <li><strong>Prop√≥sito:</strong> Optimizaci√≥n del almacenamiento y acceso</li>
                            <li><strong>Incluye:</strong> √çndices, clustering, particionado, compresi√≥n</li>
                            <li><strong>Decisiones:</strong> Tipos de archivos, estructuras de acceso</li>
                            <li><strong>Transparente para:</strong> Programadores y usuarios finales</li>
                        </ul>
                        <div class="exam-tip">
                            <p><strong>Ejemplo:</strong> CREATE INDEX idx_empleado_dept ON empleados(departamento);</p>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>üîÑ Mapeos y Transformaciones</h3>
                    <table class="comparison-table">
                        <thead>
                            <tr><th>Mapeo</th><th>Funci√≥n</th><th>Ejemplo</th></tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Externo ‚Üí Conceptual</strong></td>
                                <td>Traduce consultas de vista a esquema global</td>
                                <td>Vista 'empleados_activos' ‚Üí tabla 'empleados' con filtro</td>
                            </tr>
                            <tr>
                                <td><strong>Conceptual ‚Üí Interno</strong></td>
                                <td>Optimiza acceso f√≠sico</td>
                                <td>JOIN utiliza √≠ndice hash en lugar de secuencial</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="card">
                    <h3>‚úÖ Beneficios Pr√°cticos</h3>
                    <div class="exam-tip">
                        <h4>üéØ Para el Examen</h4>
                        <p><strong>Pregunta t√≠pica:</strong> "¬øQu√© nivel ANSI/SPARC permite que un cambio en el tipo de √≠ndice no afecte las aplicaciones?"</p>
                        <p><strong>Respuesta:</strong> El nivel interno proporciona independencia f√≠sica - los cambios en organizaci√≥n de almacenamiento son transparentes para niveles superiores.</p>
                    </div>
                </div>
            </div>

            <div id="content2" class="tab-content">
                <div class="card">
                    <h3>üìä Normalizaci√≥n de Bases de Datos</h3>
                    <p>La normalizaci√≥n es un proceso sistem√°tico para <strong>eliminar redundancia</strong> y prevenir <strong>anomal√≠as de actualizaci√≥n</strong> mediante la descomposici√≥n de tablas siguiendo reglas matem√°ticas basadas en dependencias funcionales.</p>
                    
                    <div class="highlight-box">
                        <h4>üéØ Objetivos de la Normalizaci√≥n</h4>
                        <ul class="list-checkmark">
                            <li><strong>Eliminar redundancia:</strong> Reducir duplicaci√≥n de datos</li>
                            <li><strong>Prevenir anomal√≠as:</strong> Inserci√≥n, actualizaci√≥n, borrado</li>
                            <li><strong>Garantizar integridad:</strong> Consistencia y precisi√≥n</li>
                            <li><strong>Optimizar almacenamiento:</strong> Uso eficiente del espacio</li>
                        </ul>
                    </div>
                </div>
                
                <div class="card">
                    <h3>üîç Dependencias Funcionales</h3>
                    <p>Base te√≥rica de la normalizaci√≥n: <strong>X ‚Üí Y</strong> significa "X determina funcionalmente a Y"</p>
                    <div class="success-box">
                        <h4>üí° Conceptos Clave</h4>
                        <ul class="list-checkmark">
                            <li><strong>Dependencia Completa:</strong> Y depende de todo X, no de parte</li>
                            <li><strong>Dependencia Parcial:</strong> Y depende solo de parte de X (clave compuesta)</li>
                            <li><strong>Dependencia Transitiva:</strong> X ‚Üí Y y Y ‚Üí Z, entonces X ‚Üí Z</li>
                            <li><strong>Determinante:</strong> Lado izquierdo de la dependencia funcional</li>
                        </ul>
                    </div>
                </div>
                
                <div class="card">
                    <h3>üìã Las Formas Normales en Detalle</h3>
                    
                    <div class="highlight-box">
                        <h4>1Ô∏è‚É£ PRIMERA FORMA NORMAL (1FN)</h4>
                        <ul class="list-checkmark">
                            <li><strong>Requisito:</strong> Todos los atributos contienen valores at√≥micos</li>
                            <li><strong>No permite:</strong> Grupos repetitivos o atributos multivaluados</li>
                            <li><strong>Violaci√≥n t√≠pica:</strong> Campo "tel√©fonos" con m√∫ltiples n√∫meros</li>
                        </ul>
                        <div class="exam-tip">
                            <p><strong>‚ùå Incorrecto:</strong> empleado(id, nombre, tel√©fonos: "123,456,789")</p>
                            <p><strong>‚úÖ Correcto:</strong> empleado(id, nombre) + tel√©fono(emp_id, n√∫mero)</p>
                        </div>
                    </div>
                    
                    <div class="success-box">
                        <h4>2Ô∏è‚É£ SEGUNDA FORMA NORMAL (2FN)</h4>
                        <ul class="list-checkmark">
                            <li><strong>Requisito:</strong> 1FN + No dependencias funcionales parciales</li>
                            <li><strong>Aplica a:</strong> Tablas con claves primarias compuestas</li>
                            <li><strong>Soluci√≥n:</strong> Mover atributos dependientes a nueva tabla</li>
                        </ul>
                        <div class="exam-tip">
                            <p><strong>‚ùå Violaci√≥n:</strong> pedido_producto(pedido_id, producto_id, cantidad, producto_nombre)<br>
                            producto_nombre depende solo de producto_id, no de la clave completa</p>
                            <p><strong>‚úÖ Soluci√≥n:</strong> Separar en pedido_producto(pedido_id, producto_id, cantidad) + producto(producto_id, nombre)</p>
                        </div>
                    </div>
                    
                    <div class="highlight-box">
                        <h4>3Ô∏è‚É£ TERCERA FORMA NORMAL (3FN)</h4>
                        <ul class="list-checkmark">
                            <li><strong>Requisito:</strong> 2FN + No dependencias transitivas</li>
                            <li><strong>Problema:</strong> Atributo no-clave determina a otro no-clave</li>
                            <li><strong>Beneficio:</strong> Elimina mayor√≠a de anomal√≠as de actualizaci√≥n</li>
                        </ul>
                        <div class="exam-tip">
                            <p><strong>‚ùå Violaci√≥n:</strong> empleado(id, nombre, depto_id, depto_nombre)<br>
                            depto_id ‚Üí depto_nombre (dependencia transitiva)</p>
                            <p><strong>‚úÖ Soluci√≥n:</strong> empleado(id, nombre, depto_id) + departamento(depto_id, nombre)</p>
                        </div>
                    </div>
                    
                    <div class="success-box">
                        <h4>üî• FORMA NORMAL BOYCE-CODD (BCNF)</h4>
                        <ul class="list-checkmark">
                            <li><strong>Requisito:</strong> 3FN + Todo determinante es clave candidata</li>
                            <li><strong>M√°s estricta que 3FN</strong> - resuelve anomal√≠as residuales</li>
                            <li><strong>Caso t√≠pico:</strong> M√∫ltiples claves candidatas superpuestas</li>
                        </ul>
                        <div class="exam-tip">
                            <p><strong>Ejemplo:</strong> Si profesor_curso tiene claves candidatas {profesor, curso} y {estudiante, curso}, y profesor ‚Üí departamento, viola BCNF porque 'profesor' no es superclave.</p>
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h3>‚ö° Formas Normales Avanzadas</h3>
                    <table class="comparison-table">
                        <thead>
                            <tr><th>Forma Normal</th><th>Eliminata</th><th>Complejidad</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><strong>4FN</strong></td><td>Dependencias multivaluadas</td><td>Alta - raramente necesaria</td></tr>
                            <tr><td><strong>5FN</strong></td><td>Dependencias de uni√≥n</td><td>Muy alta - casos espec√≠ficos</td></tr>
                            <tr><td><strong>6FN</strong></td><td>Dependencias triviales de uni√≥n</td><td>Te√≥rica - no pr√°ctica</td></tr>
                        </tbody>
                    </table>
                    <div class="exam-tip">
                        <h4>üí° Para el Examen</h4>
                        <p><strong>Enf√≥cate en 1FN-BCNF:</strong> Son las m√°s importantes y frecuentes en ex√°menes. 4FN+ son muy espec√≠ficas y raras en la pr√°ctica.</p>
                    </div>
                </div>
                
                <div class="card">
                    <h3>üõ†Ô∏è Proceso de Normalizaci√≥n Paso a Paso</h3>
                    <div class="success-box">
                        <h4>üìù Metodolog√≠a</h4>
                        <ol class="list-checkmark">
                            <li><strong>Identificar dependencias funcionales</strong> en la tabla original</li>
                            <li><strong>Verificar 1FN:</strong> Atomicidad de atributos</li>
                            <li><strong>Verificar 2FN:</strong> Buscar dependencias parciales</li>
                            <li><strong>Verificar 3FN:</strong> Buscar dependencias transitivas</li>
                            <li><strong>Verificar BCNF:</strong> Todo determinante es superclave</li>
                            <li><strong>Descomponer preservando</strong> dependencias y sin p√©rdida</li>
                        </ol>
                    </div>
                </div>
            </div>

            <div id="content3" class="tab-content">
                <div class="card">
                    <h3>üîß Dise√±o L√≥gico y F√≠sico</h3>
                    <p>Transformaci√≥n del modelo conceptual a implementaci√≥n eficiente, considerando tanto la estructura l√≥gica como la optimizaci√≥n f√≠sica.</p>
                    
                    <div class="highlight-box">
                        <h4>üß† Dise√±o L√≥gico</h4>
                        <ul class="list-checkmark">
                            <li><strong>Transformaci√≥n ER‚ÜíRelacional:</strong> Entidades ‚Üí tablas, relaciones ‚Üí claves for√°neas</li>
                            <li><strong>Normalizaci√≥n:</strong> Aplicaci√≥n de formas normales</li>
                            <li><strong>Definici√≥n de restricciones:</strong> CHECK, NOT NULL, UNIQUE</li>
                            <li><strong>Integridad referencial:</strong> Claves for√°neas y pol√≠ticas de cascada</li>
                        </ul>
                    </div>
                    
                    <div class="success-box">
                        <h4>üíæ Dise√±o F√≠sico</h4>
                        <ul class="list-checkmark">
                            <li><strong>Selecci√≥n de √≠ndices:</strong> B-tree, hash, bitmap</li>
                            <li><strong>Clustering:</strong> Organizaci√≥n f√≠sica de filas</li>
                            <li><strong>Particionado:</strong> Divisi√≥n horizontal/vertical</li>
                            <li><strong>Desnormalizaci√≥n controlada:</strong> Trade-off performance vs normalizaci√≥n</li>
                        </ul>
                    </div>
                </div>
                
                <div class="card">
                    <h3>üèóÔ∏è Transformaci√≥n ER a Relacional</h3>
                    <table class="comparison-table">
                        <thead>
                            <tr><th>Elemento ER</th><th>Transformaci√≥n Relacional</th><th>Ejemplo</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><strong>Entidad Fuerte</strong></td><td>Tabla con clave primaria</td><td>EMPLEADO(emp_id, nombre, salario)</td></tr>
                            <tr><td><strong>Entidad D√©bil</strong></td><td>Tabla + clave de entidad propietaria</td><td>DEPENDIENTE(emp_id, nombre, parentesco)</td></tr>
                            <tr><td><strong>Relaci√≥n 1:N</strong></td><td>Clave for√°nea en lado N</td><td>EMPLEADO(emp_id, depto_id)</td></tr>
                            <tr><td><strong>Relaci√≥n N:M</strong></td><td>Nueva tabla con claves de ambas</td><td>TRABAJA_EN(emp_id, proyecto_id, horas)</td></tr>
                            <tr><td><strong>Atributo Multivaluado</strong></td><td>Nueva tabla</td><td>TELEFONO(emp_id, numero)</td></tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="card">
                    <h3>‚ö° Optimizaci√≥n F√≠sica</h3>
                    <div class="exam-tip">
                        <h4>üìä Tipos de √çndices</h4>
                        <ul class="list-checkmark">
                            <li><strong>B-tree:</strong> Acceso secuencial y aleatorio (por defecto)</li>
                            <li><strong>Hash:</strong> B√∫squedas por igualdad muy r√°pidas</li>
                            <li><strong>Bitmap:</strong> Consultas con m√∫ltiples condiciones (data warehousing)</li>
                            <li><strong>Clustering:</strong> Orden f√≠sico coincide con l√≥gico</li>
                        </ul>
                        <p><strong>Regla:</strong> Crear √≠ndices en columnas de WHERE, JOIN, ORDER BY frecuentes</p>
                    </div>
                </div>
            </div>

            <div id="content4" class="tab-content">
                <div class="card">
                    <h3>‚ö° Control de Concurrencia</h3>
                    <p>Mecanismos para coordinar accesos simult√°neos garantizando propiedades ACID y evitando problemas como lecturas sucias, fantasma, y p√©rdidas de actualizaciones.</p>
                    
                    <div class="highlight-box">
                        <h4>üéØ Propiedades ACID</h4>
                        <ul class="list-checkmark">
                            <li><strong>Atomicidad:</strong> Todo o nada - transacci√≥n completa o rollback</li>
                            <li><strong>Consistencia:</strong> BD pasa de estado v√°lido a v√°lido</li>
                            <li><strong>Aislamiento:</strong> Transacciones no interfieren entre s√≠</li>
                            <li><strong>Durabilidad:</strong> Cambios confirmados persisten tras fallos</li>
                        </ul>
                    </div>
                </div>
                
                <div class="card">
                    <h3>üîí Protocolo Two-Phase Locking (2PL)</h3>
                    <div class="success-box">
                        <h4>üìã Fases del Protocolo 2PL</h4>
                        <ul class="list-checkmark">
                            <li><strong>Fase de Crecimiento:</strong> Solo se adquieren bloqueos, no se liberan</li>
                            <li><strong>Fase de Decrecimiento:</strong> Solo se liberan bloqueos, no se adquieren</li>
                            <li><strong>Garantiza:</strong> Seriabilidad - equivalente a ejecuci√≥n secuencial</li>
                            <li><strong>Variante Estricta:</strong> Liberar bloqueos exclusivos solo al final</li>
                        </ul>
                    </div>
                    
                    <table class="comparison-table">
                        <thead>
                            <tr><th>Tipo de Bloqueo</th><th>Operaciones</th><th>Compatibilidad</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><strong>Compartido (S)</strong></td><td>Lecturas</td><td>Compatible con otros S</td></tr>
                            <tr><td><strong>Exclusivo (X)</strong></td><td>Escrituras</td><td>Incompatible con todos</td></tr>
                            <tr><td><strong>Intenci√≥n (IS/IX)</strong></td><td>Jerarqu√≠a de granularidad</td><td>Reduce overhead</td></tr>
                        </tbody>
                    </table>
                </div>
                
                <div class="card">
                    <h3>‚ö†Ô∏è Problemas de Concurrencia</h3>
                    <div class="exam-tip">
                        <h4>üö® Anomal√≠as Cl√°sicas</h4>
                        <ul class="list-checkmark">
                            <li><strong>Lectura Sucia:</strong> Leer datos no confirmados de otra transacci√≥n</li>
                            <li><strong>Lectura No Repetible:</strong> Mismo SELECT da resultados diferentes</li>
                            <li><strong>Lectura Fantasma:</strong> Aparecen nuevas filas en rango de b√∫squeda</li>
                            <li><strong>P√©rdida de Actualizaci√≥n:</strong> Sobreescritura de cambios concurrentes</li>
                        </ul>
                    </div>
                </div>
                
                <div class="card">
                    <h3>üîß Niveles de Aislamiento</h3>
                    <table class="comparison-table">
                        <thead>
                            <tr><th>Nivel</th><th>Lectura Sucia</th><th>No Repetible</th><th>Fantasma</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><strong>READ UNCOMMITTED</strong></td><td>Permite</td><td>Permite</td><td>Permite</td></tr>
                            <tr><td><strong>READ COMMITTED</strong></td><td>Previene</td><td>Permite</td><td>Permite</td></tr>
                            <tr><td><strong>REPEATABLE READ</strong></td><td>Previene</td><td>Previene</td><td>Permite</td></tr>
                            <tr><td><strong>SERIALIZABLE</strong></td><td>Previene</td><td>Previene</td><td>Previene</td></tr>
                        </tbody>
                    </table>
                    
                    <div class="exam-tip">
                        <h4>üí° Para el Examen</h4>
                        <p><strong>Truco nemot√©cnico:</strong> M√°s restrictivo = m√°s prevenci√≥n pero menos concurrencia</p>
                        <p><strong>Default t√≠pico:</strong> READ COMMITTED en la mayor√≠a de SGBD</p>
                    </div>
                </div>
                
                <div class="card">
                    <h3>üîÑ Detecci√≥n y Resoluci√≥n de Deadlocks</h3>
                    <div class="success-box">
                        <h4>‚ö° Estrategias Anti-Deadlock</h4>
                        <ul class="list-checkmark">
                            <li><strong>Prevenci√≥n:</strong> Orden global de recursos, timeouts</li>
                            <li><strong>Detecci√≥n:</strong> Grafo de espera, ciclos</li>
                            <li><strong>Resoluci√≥n:</strong> Abort v√≠ctima (menor costo)</li>
                            <li><strong>Evitaci√≥n:</strong> Algoritmos wait-die, wound-wait</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div id="exercises" class="tab-content">
                <div class="card">
                    <h3>‚úèÔ∏è Ejercicios Pr√°cticos de Dise√±o de BD</h3>
                    <p>Problemas pr√°cticos sobre normalizaci√≥n, dise√±o l√≥gico y f√≠sico, y control de concurrencia.</p>
                    <div class="exam-tip">
                        <h4>üí° Estrategia para Resolver</h4>
                        <p><strong>Normalizaci√≥n:</strong> Identifica dependencias funcionales primero, luego aplica reglas</p>
                        <p><strong>ANSI/SPARC:</strong> Recuerda: Externo=vistas, Conceptual=esquema completo, Interno=almacenamiento</p>
                        <p><strong>Concurrencia:</strong> Analiza qu√© anomal√≠a se puede producir en cada escenario</p>
                    </div>
                </div>
                
                <div class="exercise-container">
                    <h3>Ejercicio 1: An√°lisis de Normalizaci√≥n Completo</h3>
                    <div class="exercise-question">
                        Tabla: PEDIDOS(id_pedido, fecha, id_cliente, nombre_cliente, ciudad_cliente, id_producto, nombre_producto, precio, cantidad)
                        <br><strong>Dependencias:</strong> id_pedido,id_producto ‚Üí cantidad; id_cliente ‚Üí nombre_cliente,ciudad_cliente; id_producto ‚Üí nombre_producto,precio
                        <br>¬øEn qu√© forma normal est√° y c√≥mo normalizar√≠as?
                    </div>
                    <div class="exercise-options">
                        <div class="exercise-option">
                            <input type="radio" id="ex1opt1" name="exercise1" value="a">
                            <label for="ex1opt1">Est√° en 1FN, tiene dependencias parciales</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex1opt2" name="exercise1" value="b">
                            <label for="ex1opt2">Est√° en 2FN, tiene dependencias transitivas</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex1opt3" name="exercise1" value="c">
                            <label for="ex1opt3">Est√° en 3FN, no necesita normalizaci√≥n</label>
                        </div>
                    </div>
                    <button class="exercise-btn" onclick="checkAnswer('exercise1', 'a', 'ex1feedback')">Verificar</button>
                    <div id="ex1feedback" class="exercise-feedback"></div>
                </div>

                <div class="exercise-container">
                    <h3>Ejercicio 2: Niveles ANSI/SPARC</h3>
                    <div class="exercise-question">Un DBA cambia el tipo de √≠ndice de B-tree a Hash en la tabla EMPLEADOS para optimizar b√∫squedas por ID. ¬øQu√© nivel cambia y cu√°l es el beneficio?</div>
                    <div class="exercise-options">
                        <div class="exercise-option">
                            <input type="radio" id="ex2opt1" name="exercise2" value="a">
                            <label for="ex2opt1">Nivel Interno - Las aplicaciones no se ven afectadas</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex2opt2" name="exercise2" value="b">
                            <label for="ex2opt2">Nivel Conceptual - Cambia el esquema l√≥gico</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex2opt3" name="exercise2" value="c">
                            <label for="ex2opt3">Nivel Externo - Afecta las vistas de usuario</label>
                        </div>
                    </div>
                    <button class="exercise-btn" onclick="checkAnswer('exercise2', 'a', 'ex2feedback')">Verificar</button>
                    <div id="ex2feedback" class="exercise-feedback"></div>
                </div>
                
                <div class="exercise-container">
                    <h3>Ejercicio 3: Transformaci√≥n ER a Relacional</h3>
                    <div class="exercise-question">
                        Una entidad EMPLEADO tiene una relaci√≥n N:M "TRABAJA_EN" con PROYECTO, incluyendo el atributo "horas_semanales". 
                        ¬øC√≥mo se transforma al modelo relacional?
                    </div>
                    <div class="exercise-options">
                        <div class="exercise-option">
                            <input type="radio" id="ex3opt1" name="exercise3" value="a">
                            <label for="ex3opt1">Tabla intermedia: TRABAJA_EN(emp_id, proy_id, horas_semanales)</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex3opt2" name="exercise3" value="b">
                            <label for="ex3opt2">Clave for√°nea en EMPLEADO hacia PROYECTO</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex3opt3" name="exercise3" value="c">
                            <label for="ex3opt3">Atributo multivaluado en EMPLEADO</label>
                        </div>
                    </div>
                    <button class="exercise-btn" onclick="checkAnswer('exercise3', 'a', 'ex3feedback')">Verificar</button>
                    <div id="ex3feedback" class="exercise-feedback"></div>
                </div>
                
                <div class="exercise-container">
                    <h3>Ejercicio 4: Problemas de Concurrencia</h3>
                    <div class="exercise-question">
                        Transacci√≥n T1 lee saldo=1000, T2 simult√°neamente lee saldo=1000, T1 actualiza a 900, T2 actualiza a 800. 
                        ¬øQu√© problema ocurre?
                    </div>
                    <div class="exercise-options">
                        <div class="exercise-option">
                            <input type="radio" id="ex4opt1" name="exercise4" value="a">
                            <label for="ex4opt1">P√©rdida de actualizaci√≥n - Saldo final incorrecto</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex4opt2" name="exercise4" value="b">
                            <label for="ex4opt2">Lectura sucia - Lee datos no confirmados</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex4opt3" name="exercise4" value="c">
                            <label for="ex4opt3">Lectura fantasma - Aparecen nuevos registros</label>
                        </div>
                    </div>
                    <button class="exercise-btn" onclick="checkAnswer('exercise4', 'a', 'ex4feedback')">Verificar</button>
                    <div id="ex4feedback" class="exercise-feedback"></div>
                </div>
                
                <div class="exercise-container">
                    <h3>Ejercicio 5: Protocolo 2PL</h3>
                    <div class="exercise-question">
                        Una transacci√≥n adquiere bloqueos sobre A,B,C, procesa datos, libera el bloqueo de A, adquiere bloqueo sobre D, y termina. 
                        ¬øCumple 2PL estricto?
                    </div>
                    <div class="exercise-options">
                        <div class="exercise-option">
                            <input type="radio" id="ex5opt1" name="exercise5" value="a">
                            <label for="ex5opt1">No - Libera bloqueo (A) antes de terminar la fase de crecimiento</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex5opt2" name="exercise5" value="b">
                            <label for="ex5opt2">S√≠ - Cumple perfectamente con 2PL</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex5opt3" name="exercise5" value="c">
                            <label for="ex5opt3">Depende del tipo de bloqueo usado</label>
                        </div>
                    </div>
                    <button class="exercise-btn" onclick="checkAnswer('exercise5', 'a', 'ex5feedback')">Verificar</button>
                    <div id="ex5feedback" class="exercise-feedback"></div>
                </div>
                
                <div class="exercise-container">
                    <h3>Ejercicio 6: Niveles de Aislamiento</h3>
                    <div class="exercise-question">
                        Para evitar que aparezcan nuevas filas en un rango de b√∫squeda durante una transacci√≥n, ¬øqu√© nivel de aislamiento m√≠nimo necesitas?
                    </div>
                    <div class="exercise-options">
                        <div class="exercise-option">
                            <input type="radio" id="ex6opt1" name="exercise6" value="a">
                            <label for="ex6opt1">SERIALIZABLE - Previene lecturas fantasma</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex6opt2" name="exercise6" value="b">
                            <label for="ex6opt2">REPEATABLE READ - Suficiente para este caso</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex6opt3" name="exercise6" value="c">
                            <label for="ex6opt3">READ COMMITTED - Previene lecturas sucias</label>
                        </div>
                    </div>
                    <button class="exercise-btn" onclick="checkAnswer('exercise6', 'a', 'ex6feedback')">Verificar</button>
                    <div id="ex6feedback" class="exercise-feedback"></div>
                </div>
                
                <div class="exercise-container">
                    <h3>Ejercicio 7: Selecci√≥n de √çndices</h3>
                    <div class="exercise-question">
                        En una consulta "SELECT * FROM empleados WHERE salario BETWEEN 50000 AND 80000 ORDER BY fecha_ingreso", ¬øqu√© √≠ndices recomendar√≠as?
                    </div>
                    <div class="exercise-options">
                        <div class="exercise-option">
                            <input type="radio" id="ex7opt1" name="exercise7" value="a">
                            <label for="ex7opt1">B-tree en salario y fecha_ingreso - Optimiza WHERE y ORDER BY</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex7opt2" name="exercise7" value="b">
                            <label for="ex7opt2">Hash en salario - B√∫squeda por rango no es ideal</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex7opt3" name="exercise7" value="c">
                            <label for="ex7opt3">Bitmap en todas las columnas</label>
                        </div>
                    </div>
                    <button class="exercise-btn" onclick="checkAnswer('exercise7', 'a', 'ex7feedback')">Verificar</button>
                    <div id="ex7feedback" class="exercise-feedback"></div>
                </div>
                
                <div class="exercise-container">
                    <h3>Ejercicio 8: Dependencias Funcionales</h3>
                    <div class="exercise-question">
                        En tabla ESTUDIANTE(id, nombre, curso_id, nombre_curso, profesor_id, nombre_profesor), donde curso_id ‚Üí profesor_id y profesor_id ‚Üí nombre_profesor. 
                        ¬øQu√© dependencia transitiva existe?
                    </div>
                    <div class="exercise-options">
                        <div class="exercise-option">
                            <input type="radio" id="ex8opt1" name="exercise8" value="a">
                            <label for="ex8opt1">curso_id ‚Üí nombre_profesor (transitiva v√≠a profesor_id)</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex8opt2" name="exercise8" value="b">
                            <label for="ex8opt2">id ‚Üí nombre_profesor (directa)</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex8opt3" name="exercise8" value="c">
                            <label for="ex8opt3">No hay dependencias transitivas</label>
                        </div>
                    </div>
                    <button class="exercise-btn" onclick="checkAnswer('exercise8', 'a', 'ex8feedback')">Verificar</button>
                    <div id="ex8feedback" class="exercise-feedback"></div>
                </div>
                
                <div class="exercise-container">
                    <h3>Ejercicio 9: C√°lculo de Anomal√≠as</h3>
                    <div class="exercise-question">
                        Una tabla desnormalizada VENTAS tiene 1M de registros con informaci√≥n repetida de clientes (10K clientes √∫nicos). 
                        Si se actualiza la direcci√≥n de un cliente, ¬øcu√°ntas filas podr√≠an requerir actualizaci√≥n?
                    </div>
                    <div class="exercise-options">
                        <div class="exercise-option">
                            <input type="radio" id="ex9opt1" name="exercise9" value="a">
                            <label for="ex9opt1">100 filas en promedio (1M/10K clientes)</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex9opt2" name="exercise9" value="b">
                            <label for="ex9opt2">1 fila - Solo la primera ocurrencia</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex9opt3" name="exercise9" value="c">
                            <label for="ex9opt3">10,000 filas - Una por cliente</label>
                        </div>
                    </div>
                    <button class="exercise-btn" onclick="checkAnswer('exercise9', 'a', 'ex9feedback')">Verificar</button>
                    <div id="ex9feedback" class="exercise-feedback"></div>
                </div>
                
                <div class="exercise-container">
                    <h3>Ejercicio 10: Dise√±o F√≠sico - Clustering</h3>
                    <div class="exercise-question">
                        En una tabla TRANSACCIONES con consultas frecuentes por fecha, ¬øqu√© estrategia de clustering es √≥ptima?
                    </div>
                    <div class="exercise-options">
                        <div class="exercise-option">
                            <input type="radio" id="ex10opt1" name="exercise10" value="a">
                            <label for="ex10opt1">Clustering por fecha - Agrupa registros relacionados f√≠sicamente</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex10opt2" name="exercise10" value="b">
                            <label for="ex10opt2">Clustering por ID - Acceso aleatorio m√°s r√°pido</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex10opt3" name="exercise10" value="c">
                            <label for="ex10opt3">No usar clustering - Innecesario</label>
                        </div>
                    </div>
                    <button class="exercise-btn" onclick="checkAnswer('exercise10', 'a', 'ex10feedback')">Verificar</button>
                    <div id="ex10feedback" class="exercise-feedback"></div>
                </div>
                
                <div class="exercise-container">
                    <h3>Ejercicio 11: Optimizaci√≥n de Consultas - Join Order</h3>
                    <div class="exercise-question">
                        Consulta con JOIN de 3 tablas: CLIENTES(10K), PEDIDOS(100K), DETALLES(1M). ¬øCu√°l es el orden √≥ptimo de JOIN?
                    </div>
                    <div class="exercise-options">
                        <div class="exercise-option">
                            <input type="radio" id="ex11opt1" name="exercise11" value="a">
                            <label for="ex11opt1">CLIENTES‚ÜíPEDIDOS‚ÜíDETALLES - Empieza con tabla m√°s selectiva</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex11opt2" name="exercise11" value="b">
                            <label for="ex11opt2">DETALLES‚ÜíPEDIDOS‚ÜíCLIENTES - Empieza con tabla m√°s grande</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex11opt3" name="exercise11" value="c">
                            <label for="ex11opt3">Orden aleatorio - No afecta el performance</label>
                        </div>
                    </div>
                    <button class="exercise-btn" onclick="checkAnswer('exercise11', 'a', 'ex11feedback')">Verificar</button>
                    <div id="ex11feedback" class="exercise-feedback"></div>
                </div>
                
                <div class="exercise-container">
                    <h3>Ejercicio 12: Particionado de Tablas</h3>
                    <div class="exercise-question">
                        Tabla LOGS con 10M registros anuales. ¬øQu√© estrategia de particionado mejora consultas por a√±o?
                    </div>
                    <div class="exercise-options">
                        <div class="exercise-option">
                            <input type="radio" id="ex12opt1" name="exercise12" value="a">
                            <label for="ex12opt1">Particionado por rango de fecha - Cada a√±o en partici√≥n separada</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex12opt2" name="exercise12" value="b">
                            <label for="ex12opt2">Particionado hash por ID - Distribuye uniformemente</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex12opt3" name="exercise12" value="c">
                            <label for="ex12opt3">No particionar - Tabla peque√±a</label>
                        </div>
                    </div>
                    <button class="exercise-btn" onclick="checkAnswer('exercise12', 'a', 'ex12feedback')">Verificar</button>
                    <div id="ex12feedback" class="exercise-feedback"></div>
                </div>
                
                <div class="exercise-container">
                    <h3>Ejercicio 13: Desnormalizaci√≥n Controlada</h3>
                    <div class="exercise-question">
                        En un data warehouse, JOIN frecuente entre VENTAS y PRODUCTOS. ¬øCu√°ndo justificar desnormalizaci√≥n?
                    </div>
                    <div class="exercise-options">
                        <div class="exercise-option">
                            <input type="radio" id="ex13opt1" name="exercise13" value="a">
                            <label for="ex13opt1">Cuando lecturas superan escrituras y se necesita performance</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex13opt2" name="exercise13" value="b">
                            <label for="ex13opt2">Cuando se necesita integridad referencial estricta</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex13opt3" name="exercise13" value="c">
                            <label for="ex13opt3">Cuando hay pocos registros</label>
                        </div>
                    </div>
                    <button class="exercise-btn" onclick="checkAnswer('exercise13', 'a', 'ex13feedback')">Verificar</button>
                    <div id="ex13feedback" class="exercise-feedback"></div>
                </div>
                
                <div class="exercise-container">
                    <h3>Ejercicio 14: Control de Concurrencia - MVCC</h3>
                    <div class="exercise-question">
                        En PostgreSQL, una transacci√≥n lee versi√≥n T1 mientras otra actualiza a T2. ¬øQu√© t√©cnica permite esto?
                    </div>
                    <div class="exercise-options">
                        <div class="exercise-option">
                            <input type="radio" id="ex14opt1" name="exercise14" value="a">
                            <label for="ex14opt1">MVCC (Multi-Version Concurrency Control) - M√∫ltiples versiones</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex14opt2" name="exercise14" value="b">
                            <label for="ex14opt2">Locking exclusivo - Bloquea acceso</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex14opt3" name="exercise14" value="c">
                            <label for="ex14opt3">Rollback autom√°tico - Deshace cambios</label>
                        </div>
                    </div>
                    <button class="exercise-btn" onclick="checkAnswer('exercise14', 'a', 'ex14feedback')">Verificar</button>
                    <div id="ex14feedback" class="exercise-feedback"></div>
                </div>
                
                <div class="exercise-container">
                    <h3>Ejercicio 15: Estimaci√≥n de Costo de Consulta</h3>
                    <div class="exercise-question">
                        Consulta con WHERE salario > 50000 en tabla de 1M registros, 30% cumplen condici√≥n. √çndice B-tree en salario. ¬øCosto estimado?
                    </div>
                    <div class="exercise-options">
                        <div class="exercise-option">
                            <input type="radio" id="ex15opt1" name="exercise15" value="a">
                            <label for="ex15opt1">~18 accesos (log‚ÇÇ(1M) + 300K registros) - B√∫squeda indexada</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex15opt2" name="exercise15" value="b">
                            <label for="ex15opt2">1M accesos - Full table scan</label>
                        </div>
                        <div class="exercise-option">
                            <input type="radio" id="ex15opt3" name="exercise15" value="c">
                            <label for="ex15opt3">300K accesos - Solo registros que cumplen</label>
                        </div>
                    </div>
                    <button class="exercise-btn" onclick="checkAnswer('exercise15', 'a', 'ex15feedback')">Verificar</button>
                    <div id="ex15feedback" class="exercise-feedback"></div>
                </div>
            </div>

            <div id="resources" class="tab-content">
                <div class="card">
                    <h3>üìö Recursos Adicionales</h3>
                    <ul class="list-checkmark">
                        <li><strong>Libros:</strong> "Database System Concepts" - Silberschatz</li>
                        <li><strong>Herramientas:</strong> MySQL Workbench, Oracle SQL Developer</li>
                        <li><strong>Pr√°ctica:</strong> Ejercicios de normalizaci√≥n online</li>
                    </ul>
                </div>
                <div class="card">
                    <h3>‚ùì Preguntas de Examen</h3>
                    <div class="exam-tip">
                        <h4>üí° Pregunta T√≠pica</h4>
                        <p><strong>P:</strong> ¬øCu√°ndo una tabla est√° en 3FN?</p>
                        <p><strong>R:</strong> Cuando est√° en 2FN y no tiene dependencias funcionales transitivas entre atributos no clave.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(button => button.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function toggleTheme() {
            document.body.classList.toggle('light-mode');
            document.querySelector('.theme-toggle').textContent = 
                document.body.classList.contains('light-mode') ? 'üåô' : '‚òÄÔ∏è';
        }

        function checkAnswer(exerciseName, correctAnswer, feedbackId) {
            const selected = document.querySelector(`input[name="${exerciseName}"]:checked`);
            const feedback = document.getElementById(feedbackId);
            if (!selected) {
                feedback.textContent = 'Selecciona una opci√≥n.';
                feedback.className = 'exercise-feedback incorrect';
                return;
            }
            
            const explanations = {
                'ex1feedback': {
                    'a': '¬°Correcto! ‚úÖ La tabla tiene dependencias parciales porque id_cliente‚Üínombre_cliente,ciudad_cliente y id_producto‚Üínombre_producto,precio no dependen de la clave completa (id_pedido,id_producto).',
                    'b': 'Incorrecto ‚ùå No est√° en 2FN debido a las dependencias parciales.',
                    'c': 'Incorrecto ‚ùå Claramente tiene problemas de normalizaci√≥n.'
                },
                'ex2feedback': {
                    'a': '¬°Correcto! ‚úÖ Los cambios en √≠ndices son del nivel interno y proporcionan transparencia f√≠sica - las aplicaciones no necesitan modificarse.',
                    'b': 'Incorrecto ‚ùå El esquema l√≥gico no cambia, solo la implementaci√≥n f√≠sica.',
                    'c': 'Incorrecto ‚ùå Las vistas de usuario no se ven afectadas.'
                },
                'ex3feedback': {
                    'a': '¬°Correcto! ‚úÖ Las relaciones N:M siempre requieren tabla intermedia con claves primarias de ambas entidades m√°s atributos propios.',
                    'b': 'Incorrecto ‚ùå Una clave for√°nea solo maneja relaciones 1:N.',
                    'c': 'Incorrecto ‚ùå Esto violar√≠a 1FN.'
                },
                'ex4feedback': {
                    'a': '¬°Correcto! ‚úÖ Es el problema cl√°sico de p√©rdida de actualizaci√≥n (lost update) - ambas transacciones sobrescriben cambios.',
                    'b': 'Incorrecto ‚ùå No hay lectura de datos no confirmados.',
                    'c': 'Incorrecto ‚ùå No aparecen registros nuevos.'
                },
                'ex5feedback': {
                    'a': '¬°Correcto! ‚úÖ Viola 2PL porque libera bloqueo de A antes de adquirir bloqueo de D. En 2PL no se puede liberar y luego adquirir.',
                    'b': 'Incorrecto ‚ùå Claramente viola el protocolo.',
                    'c': 'Incorrecto ‚ùå El tipo de bloqueo no es relevante para esta violaci√≥n.'
                },
                'ex6feedback': {
                    'a': '¬°Correcto! ‚úÖ SERIALIZABLE es el √∫nico nivel que previene lecturas fantasma (phantom reads).',
                    'b': 'Incorrecto ‚ùå REPEATABLE READ permite lecturas fantasma.',
                    'c': 'Incorrecto ‚ùå READ COMMITTED solo previene lecturas sucias.'
                },
                'ex7feedback': {
                    'a': '¬°Correcto! ‚úÖ B-tree es ideal para rangos (BETWEEN) y ordenaci√≥n. Se necesitan √≠ndices en ambas columnas.',
                    'b': 'Incorrecto ‚ùå Hash no soporta b√∫squedas por rango eficientemente.',
                    'c': 'Incorrecto ‚ùå Bitmap es para columnas con baja cardinalidad.'
                },
                'ex8feedback': {
                    'a': '¬°Correcto! ‚úÖ curso_id ‚Üí profesor_id ‚Üí nombre_profesor es una cadena transitiva.',
                    'b': 'Incorrecto ‚ùå Esta ser√≠a dependencia directa.',
                    'c': 'Incorrecto ‚ùå Claramente hay transitividad.'
                },
                'ex9feedback': {
                    'a': '¬°Correcto! ‚úÖ 1,000,000 registros √∑ 10,000 clientes = 100 registros promedio por cliente.',
                    'b': 'Incorrecto ‚ùå Esto causar√≠a inconsistencia.',
                    'c': 'Incorrecto ‚ùå Este ser√≠a el n√∫mero de clientes, no de registros.'
                },
                'ex10feedback': {
                    'a': '¬°Correcto! ‚úÖ Clustering por fecha mantiene registros relacionados temporalmente juntos f√≠sicamente, optimizando consultas por rangos de fecha.',
                    'b': 'Incorrecto ‚ùå ID no ayuda con consultas por fecha.',
                    'c': 'Incorrecto ‚ùå Clustering puede mejorar significativamente el performance.'
                },
                'ex11feedback': {
                    'a': '¬°Correcto! ‚úÖ Comenzar con la tabla m√°s selectiva (CLIENTES) reduce el conjunto de datos para los siguientes JOINs.',
                    'b': 'Incorrecto ‚ùå Comenzar con la tabla m√°s grande normalmente es ineficiente.',
                    'c': 'Incorrecto ‚ùå El orden de JOIN afecta significativamente el performance.'
                },
                'ex12feedback': {
                    'a': '¬°Correcto! ‚úÖ Particionado por rango de fecha permite acceso directo a datos de a√±os espec√≠ficos y mejora el performance.',
                    'b': 'Incorrecto ‚ùå Hash no ayuda con consultas por rango de fechas.',
                    'c': 'Incorrecto ‚ùå 10M registros es una tabla considerable que se beneficia del particionado.'
                },
                'ex13feedback': {
                    'a': '¬°Correcto! ‚úÖ Desnormalizaci√≥n es justificable en data warehouses donde lecturas dominan y se necesita performance.',
                    'b': 'Incorrecto ‚ùå Integridad referencial estricta es m√°s f√°cil de mantener con normalizaci√≥n.',
                    'c': 'Incorrecto ‚ùå La cantidad de registros no es el factor principal para desnormalizaci√≥n.'
                },
                'ex14feedback': {
                    'a': '¬°Correcto! ‚úÖ MVCC permite lecturas consistentes sin bloqueos, manteniendo m√∫ltiples versiones de los datos.',
                    'b': 'Incorrecto ‚ùå Locking exclusivo impedir√≠a lecturas concurrentes.',
                    'c': 'Incorrecto ‚ùå Rollback no es una t√©cnica de concurrencia, sino de recuperaci√≥n.'
                },
                'ex15feedback': {
                    'a': '¬°Correcto! ‚úÖ B√∫squeda B-tree: ~20 accesos (log‚ÇÇ(1M)) + acceso a ~300K registros = ~18 accesos totales.',
                    'b': 'Incorrecto ‚ùå Full table scan ser√≠a extremadamente ineficiente con √≠ndice disponible.',
                    'c': 'Incorrecto ‚ùå No consideras el costo de la b√∫squeda en el √≠ndice.'
                }
            };
            
            if (selected.value === correctAnswer) {
                feedback.innerHTML = explanations[feedbackId][correctAnswer];
                feedback.className = 'exercise-feedback correct';
            } else {
                feedback.innerHTML = explanations[feedbackId][selected.value];
                feedback.className = 'exercise-feedback incorrect';
            }
        }
    </script>
</body>
</html>